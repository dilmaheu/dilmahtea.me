---
import { parseHTML } from "linkedom";

declare interface Props {
  locale: string;
}

const { locale } = Astro.props as Props;

const documentBodyHTML = await Astro.slots.render("default");

const { document: documentBody } = await parseHTML(documentBodyHTML);

const documentLinks = documentBody.querySelectorAll("a");

[...documentLinks].forEach((link) => {
  const href = link.getAttribute("href");

  if (!href.startsWith("#")) {
    link.href = "/" + locale + href;
  }
});
---

<Fragment set:html={documentBody.toString()} />
