---
import SetPreferredLocale from "@scripts/SetPreferredLocale.astro";
---

<SetPreferredLocale />

<script is:inline>
  {
    const { origin, pathname } = location,
      currentLocale = pathname.slice(1, 3),
      preferredLocaleUrl = new URL(
        origin +
          pathname.replace(
            currentLocale,
            window.preferredLocale === currentLocale ? "en" : preferredLocale
          )
      );

    preferredLocaleUrl.searchParams.append("requestedLocale", currentLocale);

    location.href = preferredLocaleUrl.toString();
  }
</script>
