---
import { Icon } from "astro-icon";
import Markdown from "@astrojs/markdown-component";
import { Img, Picture } from "astro-imagetools/components";
import ClipPathSVG from "@components/ClipPathSVG.astro";
import CMS from "@store/CMS";
import RecurringImages from "@store/RecurringImages";

const { warning_notification } = RecurringImages;

const { page, recurData } = Astro.props,
  { locale} = page,
  { ASSETS_URL } = import.meta.env;

const dashboard = CMS.get("userAccountDashboard", locale);

const { 
  Block3_visibility: orders_visibility,
  Block3: orders,
} = dashboard,
{Block3_title: page_title} = orders;
---
<style lang="scss">
  @use "src/styles/colors";

  .dashboard-sec-title {
    @apply bg-primary leading-[110%] text-lightgray2 rounded-[10px];

    font-size: clamp(2rem, 3vw + 0.55rem, 2.625rem);
    padding: 10px clamp(15px, 2.08vw + 0.01rem, 30px);

    @media (max-width: 767.98px) {
      padding: 15px;
    }
  }

  .dashboard-sec {
    @apply bg-white2 rounded-[10px] text-dark;

    padding: clamp(15px, 2.08vw + 0.01rem, 25px) clamp(15px, 2.2vw + 0.1rem, 35px);

    @media (max-width: 767.98px) {
      padding: 15px;
    }
  }
  .month-container{
    @apply grid grid-cols-[repeat(auto-fit,minmax(96px,1fr))] gap-y-[15px] items-center w-full;

    .month{
      @apply px-2.5 py-0.5 lg:text-lg font-medium text-dark text-center rounded-full;
    }
    .active{
      @apply font-semibold text-primary bg-lightgreen;
    }
  }
</style>

<ClipPathSVG
  id="orders-curve"
  path="M0.517,0.008 C0.36,0.008,0.1,-0.008,0.04,0.082 S0.002,0.495,0.018,0.737 S0.182,1,0.528,1 c0.286,0,0.375,-0.063,0.447,-0.282 c0.031,-0.094,0.047,-0.323,-0.029,-0.591 C0.898,-0.045,0.734,0.008,0.517,0.008"
/>

<div class="wrapper">
  {page.Breadcrumb && (
    <div 
      role="banner"
      class="hidden md:flex flex-wrap gap-2 alice text-2xl leading-[110%] text-primary mt-[25px]" 
    >
      {page.Breadcrumb?.Steps.map((step, index) => (
        <div class="flex items-center gap-2">
          {index > 0 && (
            <svg xmlns="http://www.w3.org/2000/svg" width="8" height="17" viewBox="0 0 8 16.7">
              <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
            </svg>
          )}
          <a href={step.Link}>{step.Name}</a>
        </div>
      ))}
    </div>
  )}
</div>

<div class="wrapper py-[50px] w-full flex flex-wrap">
  <div class="w-full md:w-2/3 order-2 md:order-1">
    {(orders_visibility && orders) &&(
      <section class="grid gap-[30px]">
        <h1 class="dashboard-sec-title alice">
          {page_title}
        </h1>

        <div class="dashboard-sec grid gap-2.5">
          <div class="text-[clamp(1.25rem,1.5vw+0.15rem,1.5rem)] font-bold text-dark2">
            January 2022
          </div>

          <div class="flex flex-col gap-5">
            <div class="flex flex-wrap items-center justify-between gap-x-5 gap-y-1">
              <div class="flex items-center gap-2.5 text-lg font-bold leading-[150%] text-dark2">
                {orders.Label_order} #132131

                <svg xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 8 16.7">
                  <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
                </svg>
              </div>
              <div class="text-gray">
                {orders.text_estimated_delivery} 18-Feb-2023
              </div>
            </div>

            <div class="flex justify-between gap-4 w-full">
              <div class="flex flex-wrap gap-4 justify-between w-full">
                <div class="grid gap-4">
                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        1x Chamomile tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>
                </div>

                {orders.Button_track_package &&(
                  <div>
                    <a href="#">
                      <div class="px-[30px] py-1.5 font-bold leading-[150%] text-lightgray bg-primary rounded-full">
                        {orders.Button_track_package_text}
                      </div>
                    </a>
                  </div>
                )}
              </div>
            </div>
          </div>

          <div class="flex flex-col gap-5 pt-2.5 border-t border-lightgray">
            <div class="flex flex-wrap items-center justify-between gap-x-5 gap-y-1">
              <div class="flex items-center gap-2.5 text-lg font-bold leading-[150%] text-dark2">
                {orders.Label_order} #35995

                <svg xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 8 16.7">
                  <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
                </svg>
              </div>
              <div class="text-gray">
                {orders.text_estimated_shipment} 18-Feb-2023
              </div>
            </div>

            <div class="flex justify-between gap-4 w-full">
              <div class="flex flex-wrap gap-4 justify-between w-full">
                <div class="grid gap-4">
                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        2x Ceylon cinnamon spice tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>

                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        1x Green tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>

                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        3x Rose with french vanilla tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>
                </div>

                {orders.Button_track_package &&(
                  <div>
                    <a href="#">
                      <div class="px-[30px] py-1.5 font-bold leading-[150%] text-lightgray bg-primary rounded-full">
                        {orders.Button_track_package_text}
                      </div>
                    </a>
                  </div>
                )}
              </div>
            </div>
          </div>

          <div class="flex flex-col gap-5 pt-2.5 border-t border-lightgray">
            <div class="flex flex-wrap items-center justify-between gap-x-5 gap-y-1">
              <div class="flex items-center gap-2.5 text-lg font-bold leading-[150%] text-dark2">
                {orders.Label_order} #35995

                <svg xmlns="http://www.w3.org/2000/svg" width="8" height="17" viewBox="0 0 8 16.7">
                  <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
                </svg>
              </div>
              <div class="text-gray">
                {orders.text_delivered} 18-Feb-2023
              </div>
            </div>

            <div class="flex justify-between gap-4 w-full">
              <div class="flex flex-wrap gap-4 justify-between w-full">
                <div class="grid gap-4">
                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        3x Natural rooibos tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <a href="#">
                    <div class="px-[30px] py-1.5 font-bold leading-[150%] text-lightgray bg-primary rounded-full">
                      {orders.Button_buy_again_text}
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="dashboard-sec grid gap-2.5">
          <div class="text-[clamp(1.125rem,1.5vw+0.15rem,1.5rem)] font-bold text-dark2">
            February 2022
          </div>

          <div class="flex flex-col gap-5">
            <div class="flex flex-wrap items-center justify-between gap-x-5 gap-y-1">
              <div class="flex items-center gap-2.5 text-lg font-bold leading-[150%] text-dark2">
                {orders.Label_order} #132131

                <svg xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 8 16.7">
                  <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
                </svg>
              </div>
              <div class="text-gray">
                {orders.text_estimated_delivery} 18-Feb-2023
              </div>
            </div>

            <div class="flex justify-between gap-4 w-full">
              <div class="flex flex-wrap gap-4 justify-between w-full">
                <div class="grid gap-4">
                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        1x Chamomile tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>
                </div>

                {orders.Button_track_package &&(
                  <div>
                    <a href="#">
                      <div class="px-[30px] py-1.5 font-bold leading-[150%] text-lightgray bg-primary rounded-full">
                        {orders.Button_track_package_text}
                      </div>
                    </a>
                  </div>
                )}
              </div>
            </div>
          </div>

          <div class="flex flex-col gap-5 pt-2.5 border-t border-lightgray">
            <div class="flex flex-wrap items-center justify-between gap-x-5 gap-y-1">
              <div class="flex items-center gap-2.5 text-lg font-bold leading-[150%] text-dark2">
                {orders.Label_order} #35995

                <svg xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 8 16.7">
                  <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
                </svg>
              </div>
              <div class="text-gray">
                {orders.text_estimated_shipment} 18-Feb-2023
              </div>
            </div>

            <div 
              class:list={[
                "flex items-center gap-2.5 w-full p-[15px] sm:py-2.5 select-none", 
                "text-sm sm:text-base font-medium text-dark2 bg-[#FFFCE1] rounded-[5px]"
              ]}
            >
              <img 
                class="inline-flex p-0.5 w-[26px] text-white bg-[#febf21] rounded-full select-none"
                {...warning_notification}
              />
              {recurData.Item_stock_text} 23 Jun 2023 
            </div>

            <div class="flex justify-between gap-4 w-full">
              <div class="flex flex-wrap gap-4 justify-between w-full">
                <div class="grid gap-4">
                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        2x Ceylon cinnamon spice tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>

                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        1x Green tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>

                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        3x Rose with french vanilla tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>
                </div>

                {orders.Button_track_package &&(
                  <div>
                    <a href="#">
                      <div class="px-[30px] py-1.5 font-bold leading-[150%] text-lightgray bg-primary rounded-full">
                        {orders.Button_track_package_text}
                      </div>
                    </a>
                  </div>
                )}

                <div class="flex justify-center w-full">
                  <a 
                    href="#"
                    class="font-bold leading-[150%] text-primary"
                  >
                    10 {orders.text_more_products_in_this_order}

                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="8" viewBox="0 0 16.7 8" class="inline-flex ml-2.5">
                      <path d="M.4.3A1.4,1.4,0,0,1,2.1.3L8.4,5.4,14.6.3a1.4,1.4,0,0,1,.9-.3,1.6,1.6,0,0,1,.9.3.8.8,0,0,1,.3.8.9.9,0,0,1-.3.7L9.3,7.7a1.5,1.5,0,0,1-1.8,0L.4,1.8A.8.8,0,0,1,0,1.1,1.2,1.2,0,0,1,.4.3Z" style="fill:#2b4b50"/>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="flex flex-col gap-5 pt-2.5 border-t border-lightgray">
            <div class="flex flex-wrap items-center justify-between gap-x-5 gap-y-1">
              <div class="flex items-center gap-2.5 text-lg font-bold leading-[150%] text-dark2">
                {orders.Label_order} #35995

                <svg xmlns="http://www.w3.org/2000/svg" width="8" height="17" viewBox="0 0 8 16.7">
                  <path d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z" style="fill:#2b4b50"/>
                </svg>
              </div>
              <div class="text-gray">
                {orders.text_delivered} 18-Feb-2023
              </div>
            </div>

            <div class="flex justify-between gap-4 w-full">
              <div class="flex flex-wrap gap-4 justify-between w-full">
                <div class="grid gap-4">
                  <div class="flex gap-4 items-center">
                    <div class="min-w-[62px]">
                      <Img
                        layout="fullWidth"
                        width={62}
                        alt=""
                        attributes={{ img: { style: "aspect-ratio: 1 / 1; clip-path: url(#orders-curve)" } }}
                        src="https://cms.dilmahtea.me/uploads/rose_with_french_vanilla_with_t_column_be315af184.jpg"
                      />
                    </div>

                    <div class="grid gap-[5px] w-auto">
                      <h2 class="alice text-2xl text-dark2">
                        3x Natural rooibos tea
                      </h2>

                      <div class="text-gray">
                        Variant: 100gm
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <a 
                    href="#"
                    class="cursor-not-allowed"
                  >
                    <div class="px-[30px] py-1.5 font-bold leading-[150%] text-white bg-gray rounded-full">
                      {orders.Button_sold_out_text}
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    )}
  </div>

  <div 
    class:list={[
      "w-full md:w-1/3 order-1 md:order-2 overflow-hidden pl-0",
      "md:pl-[clamp(24px,3.8vw+0.16px,50px)] lg:pl-[clamp(70px,11.3125vw-46px,128px)]"
    ]}
  >
    <div class="grid gap-[20px] px-[25px] py-2.5 bg-white2 rounded-[10px] text-dark">
      <div class="flex items-center justify-between gap-2.5">
        <div class="alice text-[clamp(1.25rem,1.5vw+0.15rem,1.5rem)] text-dark2">
          Jan 2022 - Apr 2022
        </div>

        <a
          href="#"
          class="text-[clamp(1.125rem,1.5vw+0.12rem,1.25rem)] font-semibold text-primary"
        >
          {page.Button_change_text}
        </a>
      </div>

      <div class="month-container">
        <div class="month active">Jan 2022</div>
        <div class="month">Feb 2022</div>
        <div class="month">Mar 2022</div>
        <div class="month">Apr 2022</div>
        <div class="month">May 2022</div>
        <div class="month">Jun 2022</div>
        <div class="month">Jul 2022</div>
        <div class="month">Aug 2022</div>
        <div class="month">Sep 2022</div>
        <div class="month">Oct 2022</div>
        <div class="month">Nov 2022</div>
        <div class="month">Dec 2022</div>
      </div>
    </div>
  </div>
</div>


