---
import CMS from "@store/CMS";
import Markdown from "@astrojs/markdown-component";
import RecurringImages from "@store/RecurringImages";
import ClipPathSVG from "@components/ClipPathSVG.astro";

const { page } = Astro.props,
  { white_cup } = RecurringImages,
  { data: checkoutKindnessData } = CMS.get("checkoutKindness"),
  { CF_IMAGE_DELIVERY_ENDPOINT: imgSrcPrefix } = import.meta.env,
  EnvironmentalAdvocacyImage =
    checkoutKindnessData.attributes.Kindness_Causes.find(
      ({ cause }) => cause === "Environmental Advocacy"
    ).featured_blob.data.attributes;
---

<style lang="scss">
  @use "src/styles/poly-fluid" as *;

  h1 {
    @apply leading-[115%] md:tracking-[-0.02em];

    font-size: poly-fluid-clamp(
      (
        375px: 32px,
        1440px: 48px,
      )
    );
  }

  .hero-icon {
    width: poly-fluid-clamp(
      (
        375px: 48px,
        1440px: 100px,
      )
    );

    height: poly-fluid-clamp(
      (
        375px: 48px,
        1440px: 100px,
      )
    );
  }

  .linked-post-text {
    font-size: poly-fluid-clamp(
      (
        375px: 18px,
        1440px: 24px,
      )
    );
  }
</style>

<!-- <ClipPathSVG
  id="post-container-left-curve"
  path="M0.007,0.487 C0.007,0.642,-0.022,0.898,0.143,0.958 C0.268,1,0.639,1,1,0.995 L1,0.01 C0.797,0.005,0.559,-0.018,0.262,0.028 C-0.054,0.076,0.007,0.271,0.007,0.487"
/>

<ClipPathSVG
  id="post-container-right-curve"
  path="M0.043,1 C0.043,1,0.043,1,0.043,1 C0.043,1,-0.053,1,0.043,1 C0.043,0.781,0.043,0.367,0.043,0 C0.191,0.003,0.339,0,0.416,0 C1,0,0.994,0.013,0.994,0.475 C0.994,0.936,1,1,0.453,1 C0.216,1,0.097,1,0.043,1"
/> -->

<div class="flex flex-col gap-[30px] items-center">
  <div class="flex flex-col gap-5 items-center text-center">
    <img class="hero-icon" {...white_cup} />

    <h1 class="alice">{page.Title}</h1>

    <div><Markdown>{page.Intro_text}</Markdown></div>
  </div>

  <div class="max-w-4xl flex flex-col sm:flex-row bg-lightgray">
    <img
      class="w-full sm:w-52 h-48 sm:h-auto object-cover"
      style="clip-path: url(#post-container-left-curve);"
      alt={EnvironmentalAdvocacyImage.alternativeText}
      src={imgSrcPrefix +
        EnvironmentalAdvocacyImage.provider_metadata.public_id +
        `/cms`}
    />

    <div
      class="grow flex flex-col gap-8 sm:gap-9 px-[22px] sm:px-8 pt-6 pb-9 sm:pb-5"
      style="clip-path: url(#post-container-right-curve);"
    >
      <div class="linked-post-text font-medium text-primary">
        <Markdown>{page.linked_post_text}</Markdown>
      </div>

      <button
        class="w-fit px-16 py-4 sm:px-18 sm:py-[18px] font-bold leading-[117.1875%] bg-primary rounded-full"
      >
        {page.text_here_is_how}
      </button>
    </div>
  </div>
</div>

<script></script>
