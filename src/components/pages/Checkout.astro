---
import RecurringImages from "@store/RecurringImages";
import OrderSummary from "@components/OrderSummary.astro";
import ShippingDetails from "@components/ShippingDetails.astro";
import CheckoutContactInfoForm from "@forms/CheckoutContactInfoForm.astro";
import CheckoutFlowBg from "@components/checkout-flow-background.webp";
import CheckoutFlowBgSm from "@components/checkout-flow-background-sm.webp";

const { logo } = RecurringImages;
---

<style lang="scss">
  @use "src/styles/poly-fluid" as *;

  .checkout-flow-container {
    padding: poly-fluid-clamp(
      (
        375px: 24px 24px,
        1440px: 40px 56px,
      )
    );

    > div {
      height: poly-fluid-clamp(
        (
          375px: 38px,
          1440px: 50px,
        )
      );
    }
  }

  .flow {
    > div {
      @apply h-full text-center flex flex-col justify-between items-center;

      span {
        @apply font-medium;

        font-size: poly-fluid-clamp(
          (
            375px: 10px,
            1440px: 16px,
          )
        );
      }

      div {
        @apply w-full rounded-full bg-lightgray2;

        height: poly-fluid-clamp(
          (
            375px: 5px,
            1440px: 8px,
          )
        );
      }
    }
  }

  :global(#checkout h4) {
    @apply font-normal text-primary text-[2rem] leading-[110%];
  }

  :global(.checkout-main-active, #order-summary) {
    padding: poly-fluid-clamp(
      (
        375px: 24px 24px,
        1440px: 32px 56px,
      )
    );
  }
</style>

<div
  id="checkout"
  class="hidden fixed top-0 left-0 z-[1000] w-full h-full bg-lightgray overflow-auto"
>
  <section class="checkout-flow-container relative">
    <img
      class="absolute top-0 left-0 -z-10 w-full h-full"
      alt=""
      src={CheckoutFlowBg}
      sizes="(min-width: 1440px) 1440px, 100vw"
      srcset={`${CheckoutFlowBgSm} 640w, ${CheckoutFlowBg} 1440w`}
    />

    <div class="flex justify-between gap-[5vw]">
      <img {...logo} />

      <div class="flow flex-grow grid grid-cols-4 gap-[3.25vw]">
        <div><span>Cart</span> <div></div></div>

        <div><span>Information</span> <div class="opacity-60"></div></div>

        <div><span>Shipping details</span> <div class="opacity-30"></div></div>

        <div><span>Payment</span> <div class="opacity-30"></div></div>
      </div>
    </div>
  </section>

  <section id="checkout-main" class="hidden flex">
    <CheckoutContactInfoForm />

    <ShippingDetails />

    <OrderSummary />
  </section>
</div>
