<script is:inline>
  const { lang: preferredLocale } = document.documentElement;

  localStorage.setItem("locale", preferredLocale);

  // localize links on navigation
  document.addEventListener("click", ({ target }) => {
    const link = target.closest("a");

    if (link && link.pathname !== location.pathname) {
      link.href = "/" + preferredLocale + link.pathname;
    }
  });
</script>
