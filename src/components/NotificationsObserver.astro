<script is:inline>
  let showTranslationNotFoundError = false;

  const notificationsObserver = new MutationObserver(function (
    mutationRecords
  ) {
    // check if any notification is added
    const documentHasNewNotifications = mutationRecords.some((record) =>
      record.target?.classList?.contains("notification-content")
    );

    if (documentHasNewNotifications) {
      const { target: topmostTarget } = mutationRecords[0];

      const searchParams = Object.fromEntries(
        new URL(location.href).searchParams
      );

      const { requestedLocale } = searchParams;

      if (typeof requestedLocale === "string" && requestedLocale.length === 2) {
        topmostTarget
          .querySelectorAll(
            `.notification .notification-content .${requestedLocale}`
          )
          .forEach((notification) => notification.classList.remove("hidden"));

        showTranslationNotFoundError = true;
      }
    }
  });

  notificationsObserver.observe(document.documentElement, {
    childList: true,
    subtree: true,
  });
</script>
