---
import Navbar from "@components/Navbar.astro";
import Footer from "@components/Footer.astro";
import CartOverlay from "@components/CartOverlay.astro";

import BaseLayout from "@layouts/BaseLayout.astro";

interface Props {
  page: Record<string, any>;
  meta: Record<string, any>;
  locale: string;
  recurData: Record<string, any>;
  metaImageSrc: string;
  alternateURLs: { [locale: string]: string };
  availableLocales: string[];
}

const {
  page,
  meta,
  locale,
  recurData,
  alternateURLs,
  availableLocales,
  metaImageSrc,
} = Astro.props as Props;

const footerText = recurData.Footer_text.replaceAll(
  "<current_year>",
  `${new Date().getFullYear()}`,
);
---

<BaseLayout
  page={page}
  meta={meta}
  locale={locale}
  alternateURLs={alternateURLs}
  metaImageSrc={metaImageSrc}
>
  <div class="flex flex-wrap w-full h-full">
    <div class="block w-full bg-secondary">
      <Navbar
        page={page}
        docLocale={locale}
        footerText={footerText}
        isUserAccountNavbar={true}
        availableLocales={availableLocales}
      />

      <div class="relative">
        <div class="hero-sub-menu-shadow nav-bg hidden"></div>
      </div>

      <main>
        <div class="wrapper">
          {
            page.Breadcrumb && (
              <div
                role="banner"
                class="flex flex-wrap gap-2 recoleta text-2xl leading-[110%] text-primary mt-[25px]"
              >
                {page.Breadcrumb?.Steps.map((step, index) => (
                  <div class="flex items-center gap-2">
                    {index > 0 && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="8"
                        height="17"
                        viewBox="0 0 8 16.7"
                      >
                        <path
                          d="M.3,16.3a1.4,1.4,0,0,1,0-1.7L5.4,8.3.3,2.1A1.1,1.1,0,0,1,0,1.3,1.7,1.7,0,0,1,.3.3,1.1,1.1,0,0,1,1.1,0a.9.9,0,0,1,.7.3L7.7,7.5a1.1,1.1,0,0,1,.3.8,1.7,1.7,0,0,1-.3,1l-5.9,7a.7.7,0,0,1-.7.4A.9.9,0,0,1,.3,16.3Z"
                          style="fill:#2b4b50"
                        />
                      </svg>
                    )}
                    <a href={step.Link}>{step.Name}</a>
                  </div>
                ))}
              </div>
            )
          }
        </div>

        <slot />
      </main>
    </div>

    <Footer footerText={footerText} recurData={recurData} />
  </div>

  <CartOverlay page={page} />
</BaseLayout>
